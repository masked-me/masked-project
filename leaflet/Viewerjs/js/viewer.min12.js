/*!
 * Viewer.js v1.9.0
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2020-12-06T11:25:15.688Z
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b=typeof globalThis!=="undefined"?globalThis:b||self,b.Viewer=a())}(this,(function(){function E(b3){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){E=function(b4){return typeof b4}}else{E=function(b4){return b4&&typeof Symbol==="function"&&b4.constructor===Symbol&&b4!==Symbol.prototype?"symbol":typeof b4}}return E(b3)}function aE(b3,b4){if(!(b3 instanceof b4)){throw new TypeError("Cannot call a class as a function")}}function bN(b6,b4){for(var b3=0;b3<b4.length;b3++){var b5=b4[b3];b5.enumerable=b5.enumerable||false;b5.configurable=true;if("value" in b5){b5.writable=true}Object.defineProperty(b6,b5.key,b5)}}function a9(b5,b3,b4){if(b3){bN(b5.prototype,b3)}if(b4){bN(b5,b4)}return b5}function bl(b5,b3,b4){if(b3 in b5){Object.defineProperty(b5,b3,{value:b4,enumerable:true,configurable:true,writable:true})}else{b5[b3]=b4}return b5}function bE(b4,b5){var b6=Object.keys(b4);if(Object.getOwnPropertySymbols){var b3=Object.getOwnPropertySymbols(b4);if(b5){b3=b3.filter(function(b7){return Object.getOwnPropertyDescriptor(b4,b7).enumerable})}b6.push.apply(b6,b3)}return b6}function bX(b5){for(var b3=1;b3<arguments.length;b3++){var b4=arguments[b3]!=null?arguments[b3]:{};if(b3%2){bE(Object(b4),true).forEach(function(b6){bl(b5,b6,b4[b6])})}else{if(Object.getOwnPropertyDescriptors){Object.defineProperties(b5,Object.getOwnPropertyDescriptors(b4))}else{bE(Object(b4)).forEach(function(b6){Object.defineProperty(b5,b6,Object.getOwnPropertyDescriptor(b4,b6))})}}}return b5}var T={backdrop:true,button:true,navbar:true,title:true,toolbar:true,className:"",container:"body",filter:null,fullscreen:true,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialViewIndex:0,inline:false,interval:5000,keyboard:true,focus:true,loading:true,loop:true,minWidth:200,minHeight:100,movable:true,rotatable:true,scalable:true,zoomable:true,zoomOnTouch:true,zoomOnWheel:true,slideOnTouch:true,toggleOnDblclick:true,tooltip:true,transition:true,zIndex:2015,zIndexInline:0,zoomRatio:0.1,minZoomRatio:0.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null};var al='<div class="viewer-container" tabindex="-1" touch-action="none">'+'<div class="viewer-canvas"></div>'+'<div class="viewer-footer">'+'<div class="viewer-title"></div>'+'<div class="viewer-toolbar"></div>'+'<div class="viewer-navbar">'+'<ul class="viewer-list" role="navigation"></ul>'+"</div>"+"</div>"+'<div class="viewer-tooltip" role="alert" aria-hidden="true"></div>'+'<div class="viewer-button" data-viewer-action="mix" role="button"></div>'+'<div class="viewer-player"></div>'+"</div>";var h=typeof window!=="undefined"&&typeof window.document!=="undefined";var aw=h?window:{};var N=h&&aw.document.documentElement?"ontouchstart" in aw.document.documentElement:false;var bz=h?"PointerEvent" in aw:false;var M="viewer";var bJ="move";var ar="switch";var D="zoom";var aH="".concat(M,"-active");var bO="".concat(M,"-close");var d="".concat(M,"-fade");var bW="".concat(M,"-fixed");var bF="".concat(M,"-fullscreen");var by="".concat(M,"-fullscreen-exit");var aj="".concat(M,"-hide");var bV="".concat(M,"-hide-md-down");var m="".concat(M,"-hide-sm-down");var aK="".concat(M,"-hide-xs-down");var P="".concat(M,"-in");var ai="".concat(M,"-invisible");var bs="".concat(M,"-loading");var b1="".concat(M,"-move");var F="".concat(M,"-open");var aa="".concat(M,"-show");var bA="".concat(M,"-transition");var x="click";var bP="dblclick";var O="dragstart";var f="focusin";var a="keydown";var aL="load";var H=N?"touchend touchcancel":"mouseup";var bk=N?"touchmove":"mousemove";var bo=N?"touchstart":"mousedown";var bw=bz?"pointerdown":bo;var bC=bz?"pointermove":bk;var bQ=bz?"pointerup pointercancel":H;var aA="resize";var a0="transitionend";var aO="wheel";var ak="ready";var aq="show";var p="shown";var aB="hide";var bj="hidden";var ag="view";var bR="viewed";var e="move";var J="moved";var an="rotate";var aF="rotated";var l="scale";var aQ="scaled";var am="zoom";var aI="zoomed";var bK="play";var Z="stop";var bq="".concat(M,"Action");var G=/\s\s*/;var s=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function bp(b3){return typeof b3==="string"}var aJ=Number.isNaN||aw.isNaN;function ac(b3){return typeof b3==="number"&&!aJ(b3)}function aT(b3){return typeof b3==="undefined"}function b0(b3){return E(b3)==="object"&&b3!==null}var I=Object.prototype.hasOwnProperty;function t(b5){if(!b0(b5)){return false}try{var b6=b5.constructor;
var b4=b6.prototype;return b6&&b4&&I.call(b4,"isPrototypeOf")}catch(b3){return false}}function o(b3){return typeof b3==="function"}function ao(b5,b6){if(b5&&o(b6)){if(Array.isArray(b5)||ac(b5.length)){var b4=b5.length;var b3;for(b3=0;b3<b4;b3+=1){if(b6.call(b5,b5[b3],b3,b5)===false){break}}}else{if(b0(b5)){Object.keys(b5).forEach(function(b7){b6.call(b5,b5[b7],b7,b5)})}}}return b5}var ad=Object.assign||function ad(b6){for(var b3=arguments.length,b4=new Array(b3>1?b3-1:0),b5=1;b5<b3;b5++){b4[b5-1]=arguments[b5]}if(b0(b6)&&b4.length>0){b4.forEach(function(b7){if(b0(b7)){Object.keys(b7).forEach(function(b8){b6[b8]=b7[b8]})}})}return b6};var i=/^(?:width|height|left|top|marginLeft|marginTop)$/;function S(b3,b5){var b4=b3.style;ao(b5,function(b7,b6){if(i.test(b6)&&ac(b7)){b7+="px"}b4[b6]=b7})}function Q(b3){return bp(b3)?b3.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):b3}function w(b3,b4){if(!b3||!b4){return false}return b3.classList?b3.classList.contains(b4):b3.className.indexOf(b4)>-1}function v(b3,b5){if(!b3||!b5){return}if(ac(b3.length)){ao(b3,function(b6){v(b6,b5)});return}if(b3.classList){b3.classList.add(b5);return}var b4=b3.className.trim();if(!b4){b3.className=b5}else{if(b4.indexOf(b5)<0){b3.className="".concat(b4," ").concat(b5)}}}function a4(b3,b4){if(!b3||!b4){return}if(ac(b3.length)){ao(b3,function(b5){a4(b5,b4)});return}if(b3.classList){b3.classList.remove(b4);return}if(b3.className.indexOf(b4)>=0){b3.className=b3.className.replace(b4,"")}}function a2(b3,b5,b4){if(!b5){return}if(ac(b3.length)){ao(b3,function(b6){a2(b6,b5,b4)});return}if(b4){v(b3,b5)}else{a4(b3,b5)}}var ba=/([a-z\d])([A-Z])/g;function bD(b3){return b3.replace(ba,"$1-$2").toLowerCase()}function bf(b4,b3){if(b0(b4[b3])){return b4[b3]}if(b4.dataset){return b4.dataset[b3]}return b4.getAttribute("data-".concat(bD(b3)))}function at(b4,b3,b5){if(b0(b5)){b4[b3]=b5}else{if(b4.dataset){b4.dataset[b3]=b5}else{b4.setAttribute("data-".concat(bD(b3)),b5)}}}var aN=function(){var b3=false;if(h){var b6=false;var b7=function b7(){};var b5=Object.defineProperty({},"once",{get:function b4(){b3=true;return b6},set:function b8(b9){b6=b9}});aw.addEventListener("test",b7,b5);aw.removeEventListener("test",b7,b5)}return b3}();function j(b4,b6,b7){var b3=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var b5=b7;b6.trim().split(G).forEach(function(b9){if(!aN){var b8=b4.listeners;if(b8&&b8[b9]&&b8[b9][b7]){b5=b8[b9][b7];delete b8[b9][b7];if(Object.keys(b8[b9]).length===0){delete b8[b9]}if(Object.keys(b8).length===0){delete b4.listeners}}}b4.removeEventListener(b9,b5,b3)})}function bv(b5,b6,b7){var b4=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var b3=b7;b6.trim().split(G).forEach(function(cb){if(b4.once&&!aN){var b8=b5.listeners,ca=b8===void 0?{}:b8;b3=function b9(){delete ca[cb][b7];b5.removeEventListener(cb,b3,b4);for(var cc=arguments.length,ce=new Array(cc),cd=0;cd<cc;cd++){ce[cd]=arguments[cd]}b7.apply(b5,ce)};if(!ca[cb]){ca[cb]={}}if(ca[cb][b7]){b5.removeEventListener(cb,ca[cb][b7],b4)}ca[cb][b7]=b3;b5.listeners=ca}b5.addEventListener(cb,b3,b4)})}function aV(b4,b5,b7,b3){var b6;if(o(Event)&&o(CustomEvent)){b6=new CustomEvent(b5,bX({bubbles:true,cancelable:true,detail:b7},b3))}else{b6=document.createEvent("CustomEvent");b6.initCustomEvent(b5,true,true,b7)}return b4.dispatchEvent(b6)}function bZ(b3){var b4=b3.getBoundingClientRect();return{left:b4.left+(window.pageXOffset-document.documentElement.clientLeft),top:b4.top+(window.pageYOffset-document.documentElement.clientTop)}}function K(b8){var b7=b8.rotate,b6=b8.scaleX,b4=b8.scaleY,ca=b8.translateX,b9=b8.translateY;var b3=[];if(ac(ca)&&ca!==0){b3.push("translateX(".concat(ca,"px)"))}if(ac(b9)&&b9!==0){b3.push("translateY(".concat(b9,"px)"))}if(ac(b7)&&b7!==0){b3.push("rotate(".concat(b7,"deg)"))}if(ac(b6)&&b6!==1){b3.push("scaleX(".concat(b6,")"))}if(ac(b4)&&b4!==1){b3.push("scaleY(".concat(b4,")"))}var b5=b3.length?b3.join(" "):"none";return{WebkitTransform:b5,msTransform:b5,transform:b5}}function bU(b3){return bp(b3)?decodeURIComponent(b3.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var bM=aw.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(aw.navigator.userAgent);function a7(b5,b4,b7){var b6=document.createElement("img");if(b5.naturalWidth&&!bM){b7(b5.naturalWidth,b5.naturalHeight);return b6}var b3=document.body||document.documentElement;b6.onload=function(){b7(b6.width,b6.height);if(!bM){b3.removeChild(b6)}};ao(b4.inheritedAttributes,function(b8){var b9=b5.getAttribute(b8);if(b9!==null){b6.setAttribute(b8,b9)}});b6.src=b5.src;if(!bM){b6.style.cssText="left:0;"+"max-height:none!important;"+"max-width:none!important;"+"min-height:0!important;"+"min-width:0!important;"+"opacity:0;"+"position:absolute;"+"top:0;"+"z-index:-1;";b3.appendChild(b6)}return b6}function X(b3){switch(b3){case 2:return aK;case 3:return m;case 4:return bV;default:return""}}function be(b3){var b5=bX({},b3);
var b4=[];ao(b3,function(b7,b6){delete b5[b6];ao(b5,function(b8){var ca=Math.abs(b7.startX-b8.startX);var cd=Math.abs(b7.startY-b8.startY);var b9=Math.abs(b7.endX-b8.endX);var cb=Math.abs(b7.endY-b8.endY);var cf=Math.sqrt(ca*ca+cd*cd);var ce=Math.sqrt(b9*b9+cb*cb);var cc=(ce-cf)/cf;b4.push(cc)})});b4.sort(function(b7,b6){return Math.abs(b7)<Math.abs(b6)});return b4[0]}function aC(b7,b6){var b5=b7.pageX,b4=b7.pageY;var b3={endX:b5,endY:b4};return b6?b3:bX({timeStamp:Date.now(),startX:b5,startY:b4},b3)}function bu(b3){var b5=0;var b4=0;var b6=0;ao(b3,function(b9){var b8=b9.startX,b7=b9.startY;b5+=b8;b4+=b7;b6+=1});b5/=b6;b4/=b6;return{pageX:b5,pageY:b4}}var W={render:function W(){this.initContainer();this.initViewer();this.initList();this.renderViewer()},initBody:function bt(){var b4=this.element.ownerDocument;var b3=b4.body||b4.documentElement;this.body=b3;this.scrollbarWidth=window.innerWidth-b4.documentElement.clientWidth;this.initialBodyPaddingRight=b3.style.paddingRight;this.initialBodyComputedPaddingRight=window.getComputedStyle(b3).paddingRight},initContainer:function br(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function aR(){var b3=this.options,b4=this.parent;var b5;if(b3.inline){b5={width:Math.max(b4.offsetWidth,b3.minWidth),height:Math.max(b4.offsetHeight,b3.minHeight)};this.parentData=b5}if(this.fulled||!b5){b5=this.containerData}this.viewerData=ad({},b5)},renderViewer:function bh(){if(this.options.inline&&!this.fulled){S(this.viewer,this.viewerData)}},initList:function bx(){var b7=this;var b5=this.element,b4=this.options,b6=this.list;var b3=[];b6.innerHTML="";ao(this.images,function(cd,ca){var ce=cd.src;var cc=cd.alt||bU(ce);var b9=b7.getImageURL(cd);if(ce||b9){var cb=document.createElement("li");var b8=document.createElement("img");ao(b4.inheritedAttributes,function(cf){var cg=cd.getAttribute(cf);if(cg!==null){b8.setAttribute(cf,cg)}});b8.src=ce||b9;b8.alt=cc;b8.setAttribute("data-original-url",b9||ce);cb.setAttribute("data-index",ca);cb.setAttribute("data-viewer-action","view");cb.setAttribute("role","button");if(b4.keyboard){cb.setAttribute("tabindex",0)}cb.appendChild(b8);b6.appendChild(cb);b3.push(cb)}});this.items=b3;ao(b3,function(b8){var b9=b8.firstElementChild;at(b9,"filled",true);if(b4.loading){v(b8,bs)}bv(b9,aL,function(ca){if(b4.loading){a4(b8,bs)}b7.loadImage(ca)},{once:true})});if(b4.transition){bv(b5,bR,function(){v(b6,bA)},{once:true})}},renderList:function R(b3){var b4=b3||this.index;var b5=this.items[b4].offsetWidth||30;var b6=b5+1;S(this.list,ad({width:b6*this.length},K({translateX:(this.viewerData.width-b5)/2-b6*b4})))},resetList:function a8(){var b3=this.list;b3.innerHTML="";a4(b3,bA);S(b3,K({translateX:0}))},initImage:function bL(b8){var cb=this;var cd=this.options,b7=this.image,b3=this.viewerData;var cc=this.footer.offsetHeight;var b5=b3.width;var ca=Math.max(b3.height-cc,cc);var b4=this.imageData||{};var b6;this.imageInitializing={abort:function b9(){b6.onload=null}};b6=a7(b7,cd,function(ch,ck){var cl=ch/ck;var cf=b5;var cm=ca;cb.imageInitializing=false;if(ca*cl>b5){cm=b5/cl}else{cf=ca*cl}cf=Math.min(cf*0.9,ch);cm=Math.min(cm*0.9,ck);var cg=(b5-cf)/2;var cj=(ca-cm)/2;var ce={left:cg,top:cj,x:cg,y:cj,width:cf,height:cm,ratio:cf/ch,aspectRatio:cl,naturalWidth:ch,naturalHeight:ck};var ci=ad({},ce);if(cd.rotatable){ce.rotate=b4.rotate||0;ci.rotate=0}if(cd.scalable){ce.scaleX=b4.scaleX||1;ce.scaleY=b4.scaleY||1;ci.scaleX=1;ci.scaleY=1}cb.imageData=ce;cb.initialImageData=ci;if(b8){b8()}})},renderImage:function bH(b3){var b5=this;var b6=this.image,b8=this.imageData;S(b6,ad({width:b8.width,height:b8.height,marginLeft:b8.x,marginTop:b8.y},K(b8)));if(b3){if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&w(b6,bA)){var b4=function b4(){b5.imageRendering=false;b3()};this.imageRendering={abort:function b7(){j(b6,a0,b4)}};bv(b6,a0,b4,{once:true})}else{b3()}}},resetImage:function ap(){if(this.viewing||this.viewed){var b3=this.image;if(this.viewing){this.viewing.abort()}b3.parentNode.removeChild(b3);this.image=null}}};var bT={bind:function aU(){var b5=this.options,b6=this.viewer,b4=this.canvas;var b3=this.element.ownerDocument;bv(b6,x,this.onClick=this.click.bind(this));bv(b6,O,this.onDragStart=this.dragstart.bind(this));bv(b4,bw,this.onPointerDown=this.pointerdown.bind(this));bv(b3,bC,this.onPointerMove=this.pointermove.bind(this));bv(b3,bQ,this.onPointerUp=this.pointerup.bind(this));bv(b3,a,this.onKeyDown=this.keydown.bind(this));bv(window,aA,this.onResize=this.resize.bind(this));if(b5.zoomable&&b5.zoomOnWheel){bv(b6,aO,this.onWheel=this.wheel.bind(this),{passive:false,capture:true})}if(b5.toggleOnDblclick){bv(b4,bP,this.onDblclick=this.dblclick.bind(this))}},unbind:function bm(){var b5=this.options,b6=this.viewer,b4=this.canvas;var b3=this.element.ownerDocument;j(b6,x,this.onClick);j(b6,O,this.onDragStart);j(b4,bw,this.onPointerDown);j(b3,bC,this.onPointerMove);j(b3,bQ,this.onPointerUp);j(b3,a,this.onKeyDown);
j(window,aA,this.onResize);if(b5.zoomable&&b5.zoomOnWheel){j(b6,aO,this.onWheel,{passive:false,capture:true})}if(b5.toggleOnDblclick){j(b4,bP,this.onDblclick)}}};var a3={click:function bd(b4){var b3=this.options,b7=this.imageData;var b6=b4.target;var b5=bf(b6,bq);if(!b5&&b6.localName==="img"&&b6.parentElement.localName==="li"){b6=b6.parentElement;b5=bf(b6,bq)}if(N&&b4.isTrusted&&b6===this.canvas){clearTimeout(this.clickCanvasTimeout)}switch(b5){case"mix":if(this.played){this.stop()}else{if(b3.inline){if(this.fulled){this.exit()}else{this.full()}}else{this.hide()}}break;case"hide":this.hide();break;case"view":this.view(bf(b6,"index"));break;case"zoom-in":this.zoom(0.1,true);break;case"zoom-out":this.zoom(-0.1,true);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(b3.loop);break;case"play":this.play(b3.fullscreen);break;case"next":this.next(b3.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-b7.scaleX||-1);break;case"flip-vertical":this.scaleY(-b7.scaleY||-1);break;default:if(this.played){this.stop()}}},dblclick:function ah(b3){b3.preventDefault();if(this.viewed&&b3.target===this.image){if(N&&b3.isTrusted){clearTimeout(this.doubleClickImageTimeout)}this.toggle()}},load:function bn(){var b8=this;if(this.timeout){clearTimeout(this.timeout);this.timeout=false}var b5=this.element,b4=this.options,b6=this.image,b3=this.index,b7=this.viewerData;a4(b6,ai);if(b4.loading){a4(this.canvas,bs)}b6.style.cssText="height:0;"+"margin-left:".concat(b7.width/2,"px;")+"margin-top:".concat(b7.height/2,"px;")+"max-width:none!important;"+"position:absolute;"+"width:0;";this.initImage(function(){a2(b6,b1,b4.movable);a2(b6,bA,b4.transition);b8.renderImage(function(){b8.viewed=true;b8.viewing=false;if(o(b4.viewed)){bv(b5,bR,b4.viewed,{once:true})}aV(b5,bR,{originalImage:b8.images[b3],index:b3,image:b6},{cancelable:false})})})},loadImage:function z(b6){var b8=b6.target;var b5=b8.parentNode;var b4=b5.offsetWidth||30;var b3=b5.offsetHeight||50;var b7=!!bf(b8,"filled");a7(b8,this.options,function(ca,cd){var cc=ca/cd;var cb=b4;var b9=b3;if(b3*cc>b4){if(b7){cb=b3*cc}else{b9=b4/cc}}else{if(b7){b9=b4/cc}else{cb=b3*cc}}S(b8,ad({width:cb,height:b9},K({translateX:(b4-cb)/2,translateY:(b3-b9)/2})))})},keydown:function bg(b4){var b3=this.options;if(!b3.keyboard){return}var b5=b4.keyCode||b4.which||b4.charCode;switch(b5){case 13:if(this.viewer.contains(b4.target)){this.click(b4)}break}if(!this.fulled){return}switch(b5){case 27:if(this.played){this.stop()}else{if(b3.inline){if(this.fulled){this.exit()}}else{this.hide()}}break;case 32:if(this.played){this.stop()}break;case 37:this.prev(b3.loop);break;case 38:b4.preventDefault();this.zoom(b3.zoomRatio,true);break;case 39:this.next(b3.loop);break;case 40:b4.preventDefault();this.zoom(-b3.zoomRatio,true);break;case 48:case 49:if(b4.ctrlKey){b4.preventDefault();this.toggle()}break}},dragstart:function c(b3){if(b3.target.localName==="img"){b3.preventDefault()}},pointerdown:function au(b7){var b4=this.options,b3=this.pointers;var b6=b7.buttons,b5=b7.button;if(!this.viewed||this.showing||this.viewing||this.hiding||(b7.type==="mousedown"||b7.type==="pointerdown"&&b7.pointerType==="mouse")&&(ac(b6)&&b6!==1||ac(b5)&&b5!==0||b7.ctrlKey)){return}b7.preventDefault();if(b7.changedTouches){ao(b7.changedTouches,function(b9){b3[b9.identifier]=aC(b9)})}else{b3[b7.pointerId||0]=aC(b7)}var b8=b4.movable?bJ:false;if(b4.zoomOnTouch&&b4.zoomable&&Object.keys(b3).length>1){b8=D}else{if(b4.slideOnTouch&&(b7.pointerType==="touch"||b7.type==="touchstart")&&this.isSwitchable()){b8=ar}}if(b4.transition&&(b8===bJ||b8===D)){a4(this.image,bA)}this.action=b8},pointermove:function aG(b4){var b3=this.pointers,b5=this.action;if(!this.viewed||!b5){return}b4.preventDefault();if(b4.changedTouches){ao(b4.changedTouches,function(b6){ad(b3[b6.identifier]||{},aC(b6,true))})}else{ad(b3[b4.pointerId||0]||{},aC(b4,true))}this.change(b4)},pointerup:function C(b6){var b5=this;var b4=this.options,b7=this.action,b3=this.pointers;var b8;if(b6.changedTouches){ao(b6.changedTouches,function(b9){b8=b3[b9.identifier];delete b3[b9.identifier]})}else{b8=b3[b6.pointerId||0];delete b3[b6.pointerId||0]}if(!b7){return}b6.preventDefault();if(b4.transition&&(b7===bJ||b7===D)){v(this.image,bA)}this.action=false;if(N&&b7!==D&&b8&&Date.now()-b8.timeStamp<500){clearTimeout(this.clickCanvasTimeout);clearTimeout(this.doubleClickImageTimeout);if(b4.toggleOnDblclick&&this.viewed&&b6.target===this.image){if(this.imageClicked){this.imageClicked=false;this.doubleClickImageTimeout=setTimeout(function(){aV(b5.image,bP)},50)}else{this.imageClicked=true;this.doubleClickImageTimeout=setTimeout(function(){b5.imageClicked=false},500)}}else{this.imageClicked=false;if(b4.backdrop&&b4.backdrop!=="static"&&b6.target===this.canvas){this.clickCanvasTimeout=setTimeout(function(){aV(b5.canvas,x)},50)}}}},resize:function A(){var b3=this;if(!this.isShown||this.hiding){return
}if(this.fulled){this.close();this.initBody();this.open()}this.initContainer();this.initViewer();this.renderViewer();this.renderList();if(this.viewed){this.initImage(function(){b3.renderImage()})}if(this.played){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)){this.stop();return}ao(this.player.getElementsByTagName("img"),function(b4){bv(b4,aL,b3.loadImage.bind(b3),{once:true});aV(b4,aL)})}},wheel:function k(b5){var b3=this;if(!this.viewed){return}b5.preventDefault();if(this.wheeling){return}this.wheeling=true;setTimeout(function(){b3.wheeling=false},50);var b4=Number(this.options.zoomRatio)||0.1;var b6=1;if(b5.deltaY){b6=b5.deltaY>0?1:-1}else{if(b5.wheelDelta){b6=-b5.wheelDelta/120}else{if(b5.detail){b6=b5.detail>0?1:-1}}}this.zoom(-b6*b4,true,b5)}};var az={show:function a6(){var b3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var b5=this.element,b4=this.options;if(b4.inline||this.showing||this.isShown||this.showing){return this}if(!this.ready){this.build();if(this.ready){this.show(b3)}return this}if(o(b4.show)){bv(b5,aq,b4.show,{once:true})}if(aV(b5,aq)===false||!this.ready){return this}if(this.hiding){this.transitioning.abort()}this.showing=true;this.open();var b7=this.viewer;a4(b7,aj);b7.setAttribute("role","dialog");b7.setAttribute("aria-labelledby",this.title.id);b7.setAttribute("aria-modal",true);b7.removeAttribute("aria-hidden");if(b4.transition&&!b3){var b6=this.shown.bind(this);this.transitioning={abort:function b8(){j(b7,a0,b6);a4(b7,P)}};v(b7,bA);b7.initialOffsetWidth=b7.offsetWidth;bv(b7,a0,b6,{once:true});v(b7,P)}else{v(b7,P);this.shown()}return this},hide:function bc(){var ca=this;var b4=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var b8=this.element,cc=this.options;if(cc.inline||this.hiding||!(this.isShown||this.showing)){return this}if(o(cc.hide)){bv(b8,aB,cc.hide,{once:true})}if(aV(b8,aB)===false){return this}if(this.showing){this.transitioning.abort()}this.hiding=true;if(this.played){this.stop()}else{if(this.viewing){this.viewing.abort()}}var b9=this.viewer,b5=this.image;var b3=function b3(){a4(b9,P);ca.hidden()};if(cc.transition&&!b4){var cb=function cb(cd){if(cd&&cd.target===b9){j(b9,a0,cb);ca.hidden()}};var b7=function b7(){if(w(b9,bA)){bv(b9,a0,cb);a4(b9,P)}else{b3()}};this.transitioning={abort:function b6(){if(ca.viewed&&w(b5,bA)){j(b5,a0,b7)}else{if(w(b9,bA)){j(b9,a0,cb)}}}};if(this.viewed&&w(b5,bA)){bv(b5,a0,b7,{once:true});this.zoomTo(0,false,false,true)}else{b7()}}else{b3()}return this},view:function aX(){var cc=this;var cb=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.options.initialViewIndex;cb=Number(cb)||0;if(this.hiding||this.played||cb<0||cb>=this.length||this.viewed&&cb===this.index){return this}if(!this.isShown){this.index=cb;return this.show()}if(this.viewing){this.viewing.abort()}var b8=this.element,ch=this.options,ce=this.title,b4=this.canvas;var cg=this.items[cb];var b9=cg.querySelector("img");var b3=bf(b9,"originalUrl");var ca=b9.getAttribute("alt");var b5=document.createElement("img");ao(ch.inheritedAttributes,function(ci){var cj=b9.getAttribute(ci);if(cj!==null){b5.setAttribute(ci,cj)}});b5.src=b3;b5.alt=ca;if(o(ch.view)){bv(b8,ag,ch.view,{once:true})}if(aV(b8,ag,{originalImage:this.images[cb],index:cb,image:b5})===false||!this.isShown||this.hiding||this.played){return this}var b7=this.items[this.index];a4(b7,aH);b7.removeAttribute("aria-selected");v(cg,aH);cg.setAttribute("aria-selected",true);if(ch.focus){cg.focus()}this.image=b5;this.viewed=false;this.index=cb;this.imageData={};v(b5,ai);if(ch.loading){v(b4,bs)}b4.innerHTML="";b4.appendChild(b5);this.renderList();ce.innerHTML="";var cf=function cf(){var cj=cc.imageData;var ci=Array.isArray(ch.title)?ch.title[1]:ch.title;ce.innerHTML=Q(o(ci)?ci.call(cc,b5,cj):"".concat(ca," (").concat(cj.naturalWidth," \xD7 ").concat(cj.naturalHeight,")"))};var cd;bv(b8,bR,cf,{once:true});this.viewing={abort:function b6(){j(b8,bR,cf);if(b5.complete){if(cc.imageRendering){cc.imageRendering.abort()}else{if(cc.imageInitializing){cc.imageInitializing.abort()}}}else{b5.src="";j(b5,aL,cd);if(cc.timeout){clearTimeout(cc.timeout)}}}};if(b5.complete){this.load()}else{bv(b5,aL,cd=this.load.bind(this),{once:true});if(this.timeout){clearTimeout(this.timeout)}this.timeout=setTimeout(function(){a4(b5,ai);cc.timeout=false},1000)}return this},prev:function bi(){var b3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var b4=this.index-1;if(b4<0){b4=b3?this.length-1:0}this.view(b4);return this},next:function ae(){var b3=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var b5=this.length-1;var b4=this.index+1;if(b4>b5){b4=b3?0:b5}this.view(b4);return this},move:function L(b3){var b5=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b3;var b4=this.imageData;this.moveTo(aT(b3)?b3:b4.x+Number(b3),aT(b5)?b5:b4.y+Number(b5));return this},moveTo:function bB(b9){var b6=this;
var b8=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b9;var b7=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var b5=this.element,cc=this.options,b3=this.imageData;b9=Number(b9);b8=Number(b8);if(this.viewed&&!this.played&&cc.movable){var cb=b3.x;var ca=b3.y;var b4=false;if(ac(b9)){b4=true}else{b9=cb}if(ac(b8)){b4=true}else{b8=ca}if(b4){if(o(cc.move)){bv(b5,e,cc.move,{once:true})}if(aV(b5,e,{x:b9,y:b8,oldX:cb,oldY:ca,originalEvent:b7})===false){return this}b3.x=b9;b3.y=b8;b3.left=b9;b3.top=b8;this.moving=true;this.renderImage(function(){b6.moving=false;if(o(cc.moved)){bv(b5,J,cc.moved,{once:true})}aV(b5,J,{x:b9,y:b8,oldX:cb,oldY:ca,originalEvent:b7},{cancelable:false})})}}return this},rotate:function r(b3){this.rotateTo((this.imageData.rotate||0)+Number(b3));return this},rotateTo:function b2(b7){var b5=this;var b4=this.element,b3=this.options,b8=this.imageData;b7=Number(b7);if(ac(b7)&&this.viewed&&!this.played&&b3.rotatable){var b6=b8.rotate;if(o(b3.rotate)){bv(b4,an,b3.rotate,{once:true})}if(aV(b4,an,{degree:b7,oldDegree:b6})===false){return this}b8.rotate=b7;this.rotating=true;this.renderImage(function(){b5.rotating=false;if(o(b3.rotated)){bv(b4,aF,b3.rotated,{once:true})}aV(b4,aF,{degree:b7,oldDegree:b6},{cancelable:false})})}return this},scaleX:function V(b3){this.scale(b3,this.imageData.scaleY);return this},scaleY:function U(b3){this.scale(this.imageData.scaleX,b3);return this},scale:function aY(b9){var b6=this;var b7=arguments.length>1&&arguments[1]!==undefined?arguments[1]:b9;var b5=this.element,cb=this.options,b3=this.imageData;b9=Number(b9);b7=Number(b7);if(this.viewed&&!this.played&&cb.scalable){var ca=b3.scaleX;var b8=b3.scaleY;var b4=false;if(ac(b9)){b4=true}else{b9=ca}if(ac(b7)){b4=true}else{b7=b8}if(b4){if(o(cb.scale)){bv(b5,l,cb.scale,{once:true})}if(aV(b5,l,{scaleX:b9,scaleY:b7,oldScaleX:ca,oldScaleY:b8})===false){return this}b3.scaleX=b9;b3.scaleY=b7;this.scaling=true;this.renderImage(function(){b6.scaling=false;if(o(cb.scaled)){bv(b5,aQ,cb.scaled,{once:true})}aV(b5,aQ,{scaleX:b9,scaleY:b7,oldScaleX:ca,oldScaleY:b8},{cancelable:false})})}}return this},zoom:function a1(b5){var b4=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var b3=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var b6=this.imageData;b5=Number(b5);if(b5<0){b5=1/(1-b5)}else{b5=1+b5}this.zoomTo(b6.width*b5/b6.naturalWidth,b4,b3);return this},zoomTo:function aW(cb){var co=this;var ce=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var cl=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;var cj=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var b4=this.element,b8=this.options,ch=this.pointers,cp=this.imageData;var cf=cp.x,cd=cp.y,cm=cp.width,ci=cp.height,b6=cp.naturalWidth,b5=cp.naturalHeight;cb=Math.max(0,cb);if(ac(cb)&&this.viewed&&!this.played&&(cj||b8.zoomable)){if(!cj){var cc=Math.max(0.01,b8.minZoomRatio);var b3=Math.min(100,b8.maxZoomRatio);cb=Math.min(Math.max(cb,cc),b3)}if(cl&&b8.zoomRatio>=0.055&&cb>0.95&&cb<1.05){cb=1}var cg=b6*cb;var cn=b5*cb;var ck=cg-cm;var b7=cn-ci;var b9=cm/b6;if(o(b8.zoom)){bv(b4,am,b8.zoom,{once:true})}if(aV(b4,am,{ratio:cb,oldRatio:b9,originalEvent:cl})===false){return this}this.zooming=true;if(cl){var ca=bZ(this.viewer);var cq=ch&&Object.keys(ch).length?bu(ch):{pageX:cl.pageX,pageY:cl.pageY};cp.x-=ck*((cq.pageX-ca.left-cf)/cm);cp.y-=b7*((cq.pageY-ca.top-cd)/ci)}else{cp.x-=ck/2;cp.y-=b7/2}cp.left=cp.x;cp.top=cp.y;cp.width=cg;cp.height=cn;cp.ratio=cb;this.renderImage(function(){co.zooming=false;if(o(b8.zoomed)){bv(b4,aI,b8.zoomed,{once:true})}aV(b4,aI,{ratio:cb,oldRatio:b9,originalEvent:cl},{cancelable:false})});if(ce){this.tooltip()}}return this},play:function n(){var b4=this;var ca=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!this.isShown||this.played){return this}var b5=this.element,cc=this.options;if(o(cc.play)){bv(b5,bK,cc.play,{once:true})}if(aV(b5,bK)===false){return this}var cb=this.player;var b8=this.loadImage.bind(this);var b7=[];var b9=0;var b6=0;this.played=true;this.onLoadWhenPlay=b8;if(ca){this.requestFullscreen()}v(cb,aa);ao(this.items,function(cf,ce){var cd=cf.querySelector("img");var cg=document.createElement("img");cg.src=bf(cd,"originalUrl");cg.alt=cd.getAttribute("alt");cg.referrerPolicy=cd.referrerPolicy;b9+=1;v(cg,d);a2(cg,bA,cc.transition);if(w(cf,aH)){v(cg,P);b6=ce}b7.push(cg);bv(cg,aL,b8,{once:true});cb.appendChild(cg)});if(ac(cc.interval)&&cc.interval>0){var b3=function b3(){b4.playing=setTimeout(function(){a4(b7[b6],P);b6+=1;b6=b6<b9?b6:0;v(b7[b6],P);b3()},cc.interval)};if(b9>1){b3()}}return this},stop:function aP(){var b3=this;if(!this.played){return this}var b6=this.element,b4=this.options;if(o(b4.stop)){bv(b6,Z,b4.stop,{once:true})}if(aV(b6,Z)===false){return this}var b5=this.player;this.played=false;clearTimeout(this.playing);ao(b5.getElementsByTagName("img"),function(b7){j(b7,aL,b3.onLoadWhenPlay)});a4(b5,aa);b5.innerHTML="";this.exitFullscreen();
return this},full:function aD(){var b7=this;var b3=this.options,b6=this.viewer,b5=this.image,b4=this.list;if(!this.isShown||this.played||this.fulled||!b3.inline){return this}this.fulled=true;this.open();v(this.button,by);if(b3.transition){a4(b4,bA);if(this.viewed){a4(b5,bA)}}v(b6,bW);b6.setAttribute("role","dialog");b6.setAttribute("aria-labelledby",this.title.id);b6.setAttribute("aria-modal",true);b6.removeAttribute("style");S(b6,{zIndex:b3.zIndex});if(b3.focus){this.enforceFocus()}this.initContainer();this.viewerData=ad({},this.containerData);this.renderList();if(this.viewed){this.initImage(function(){b7.renderImage(function(){if(b3.transition){setTimeout(function(){v(b5,bA);v(b4,bA)},0)}})})}return this},exit:function bY(){var b6=this;var b3=this.options,b7=this.viewer,b5=this.image,b4=this.list;if(!this.isShown||this.played||!this.fulled||!b3.inline){return this}this.fulled=false;this.close();a4(this.button,by);if(b3.transition){a4(b4,bA);if(this.viewed){a4(b5,bA)}}if(b3.focus){this.clearEnforceFocus()}b7.removeAttribute("role");b7.removeAttribute("aria-labelledby");b7.removeAttribute("aria-modal");a4(b7,bW);S(b7,{zIndex:b3.zIndexInline});this.viewerData=ad({},this.parentData);this.renderViewer();this.renderList();if(this.viewed){this.initImage(function(){b6.renderImage(function(){if(b3.transition){setTimeout(function(){v(b5,bA);v(b4,bA)},0)}})})}return this},tooltip:function B(){var b5=this;var b4=this.options,b3=this.tooltipBox,b6=this.imageData;if(!this.viewed||this.played||!b4.tooltip){return this}b3.textContent="".concat(Math.round(b6.ratio*100),"%");if(!this.tooltipping){if(b4.transition){if(this.fading){aV(b3,a0)}v(b3,aa);v(b3,d);v(b3,bA);b3.removeAttribute("aria-hidden");b3.initialOffsetWidth=b3.offsetWidth;v(b3,P)}else{v(b3,aa);b3.removeAttribute("aria-hidden")}}else{clearTimeout(this.tooltipping)}this.tooltipping=setTimeout(function(){if(b4.transition){bv(b3,a0,function(){a4(b3,aa);a4(b3,d);a4(b3,bA);b3.setAttribute("aria-hidden",true);b5.fading=false},{once:true});a4(b3,P);b5.fading=true}else{a4(b3,aa);b3.setAttribute("aria-hidden",true)}b5.tooltipping=false},1000);return this},toggle:function av(){if(this.imageData.ratio===1){this.zoomTo(this.initialImageData.ratio,true)}else{this.zoomTo(1,true)}return this},reset:function bb(){if(this.viewed&&!this.played){this.imageData=ad({},this.initialImageData);this.renderImage()}return this},update:function u(){var b8=this;var b7=this.element,b6=this.options,b9=this.isImg;if(b9&&!b7.parentNode){return this.destroy()}var b4=[];ao(b9?[b7]:b7.querySelectorAll("img"),function(cb){if(o(b6.filter)){if(b6.filter.call(b8,cb)){b4.push(cb)}}else{if(b8.getImageURL(cb)){b4.push(cb)}}});if(!b4.length){return this}this.images=b4;this.length=b4.length;if(this.ready){var b3=[];ao(this.items,function(cd,cc){var cb=cd.querySelector("img");var ce=b4[cc];if(ce&&cb){if(ce.src!==cb.src||ce.alt!==cb.alt){b3.push(cc)}}else{b3.push(cc)}});S(this.list,{width:"auto"});this.initList();if(this.isShown){if(this.length){if(this.viewed){var b5=b3.indexOf(this.index);if(b5>=0){this.viewed=false;this.view(Math.max(Math.min(this.index-b5,this.length-1),0))}else{var ca=this.items[this.index];v(ca,aH);ca.setAttribute("aria-selected",true)}}}else{this.image=null;this.viewed=false;this.index=0;this.imageData={};this.canvas.innerHTML="";this.title.innerHTML=""}}}else{this.build()}return this},destroy:function q(){var b4=this.element,b3=this.options;if(!b4[M]){return this}this.destroyed=true;if(this.ready){if(this.played){this.stop()}if(b3.inline){if(this.fulled){this.exit()}this.unbind()}else{if(this.isShown){if(this.viewing){if(this.imageRendering){this.imageRendering.abort()}else{if(this.imageInitializing){this.imageInitializing.abort()}}}if(this.hiding){this.transitioning.abort()}this.hidden()}else{if(this.showing){this.transitioning.abort();this.hidden()}}}this.ready=false;this.viewer.parentNode.removeChild(this.viewer)}else{if(b3.inline){if(this.delaying){this.delaying.abort()}else{if(this.initializing){this.initializing.abort()}}}}if(!b3.inline){j(b4,x,this.onStart)}b4[M]=undefined;return this}};var ay={getImageURL:function b(b4){var b3=this.options.url;if(bp(b3)){b3=b4.getAttribute(b3)}else{if(o(b3)){b3=b3.call(this,b4)}else{b3=""}}return b3},enforceFocus:function g(){var b3=this;this.clearEnforceFocus();bv(document,f,this.onFocusin=function(b4){var b5=b4.target;var b6=b3.viewer;if(b5!==document&&b5!==b6&&!b6.contains(b5)){b6.focus()}})},clearEnforceFocus:function bI(){if(this.onFocusin){j(document,f,this.onFocusin);this.onFocusin=null}},open:function aM(){var b3=this.body;v(b3,F);b3.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px")},close:function af(){var b3=this.body;a4(b3,F);b3.style.paddingRight=this.initialBodyPaddingRight},shown:function a5(){var b4=this.element,b3=this.options,b5=this.viewer;this.fulled=true;this.isShown=true;this.render();this.bind();this.showing=false;if(b3.focus){b5.focus();this.enforceFocus()}if(o(b3.shown)){bv(b4,p,b3.shown,{once:true})
}if(aV(b4,p)===false){return}if(this.ready&&this.isShown&&!this.hiding){this.view(this.index)}},hidden:function ax(){var b4=this.element,b3=this.options,b5=this.viewer;if(b3.fucus){this.clearEnforceFocus()}this.fulled=false;this.viewed=false;this.isShown=false;this.close();this.unbind();v(b5,aj);b5.removeAttribute("role");b5.removeAttribute("aria-labelledby");b5.removeAttribute("aria-modal");b5.setAttribute("aria-hidden",true);this.resetList();this.resetImage();this.hiding=false;if(!this.destroyed){if(o(b3.hidden)){bv(b4,bj,b3.hidden,{once:true})}aV(b4,bj,null,{cancelable:false})}},requestFullscreen:function ab(){var b3=this.element.ownerDocument;if(this.fulled&&!(b3.fullscreenElement||b3.webkitFullscreenElement||b3.mozFullScreenElement||b3.msFullscreenElement)){var b4=b3.documentElement;if(b4.requestFullscreen){b4.requestFullscreen()}else{if(b4.webkitRequestFullscreen){b4.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}else{if(b4.mozRequestFullScreen){b4.mozRequestFullScreen()}else{if(b4.msRequestFullscreen){b4.msRequestFullscreen()}}}}}},exitFullscreen:function y(){var b3=this.element.ownerDocument;if(this.fulled&&(b3.fullscreenElement||b3.webkitFullscreenElement||b3.mozFullScreenElement||b3.msFullscreenElement)){if(b3.exitFullscreen){b3.exitFullscreen()}else{if(b3.webkitExitFullscreen){b3.webkitExitFullscreen()}else{if(b3.mozCancelFullScreen){b3.mozCancelFullScreen()}else{if(b3.msExitFullscreen){b3.msExitFullscreen()}}}}}},change:function aS(b7){var b5=this.options,b4=this.pointers;var b8=b4[Object.keys(b4)[0]];if(!b8){return}var b3=b8.endX-b8.startX;var b9=b8.endY-b8.startY;switch(this.action){case bJ:this.move(b3,b9,b7);break;case D:this.zoom(be(b4),false,b7);break;case ar:this.action="switched";var b6=Math.abs(b3);if(b6>1&&b6>Math.abs(b9)){this.pointers={};if(b3>1){this.prev(b5.loop)}else{if(b3<-1){this.next(b5.loop)}}}break}ao(b4,function(ca){ca.startX=ca.endX;ca.startY=ca.endY})},isSwitchable:function bG(){var b4=this.imageData,b3=this.viewerData;return this.length>1&&b4.x>=0&&b4.y>=0&&b4.width<=b3.width&&b4.height<=b3.height}};var aZ=aw.Viewer;var bS=function(b3){return function(){b3+=1;return b3}}(-1);var Y=function(){function b4(b9){var b8=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};aE(this,b4);if(!b9||b9.nodeType!==1){throw new Error("The first argument is required and must be an element.")}this.element=b9;this.options=ad({},T,t(b8)&&b8);this.action=false;this.fading=false;this.fulled=false;this.hiding=false;this.imageClicked=false;this.imageData={};this.index=this.options.initialViewIndex;this.isImg=false;this.isShown=false;this.length=0;this.moving=false;this.played=false;this.playing=false;this.pointers={};this.ready=false;this.rotating=false;this.scaling=false;this.showing=false;this.timeout=false;this.tooltipping=false;this.viewed=false;this.viewing=false;this.wheeling=false;this.zooming=false;this.id=bS();this.init()}a9(b4,[{key:"init",value:function b6(){var cf=this;var cb=this.element,ca=this.options;if(cb[M]){return}cb[M]=this;if(ca.focus&&!ca.keyboard){ca.focus=false}var cd=cb.localName==="img";var b8=[];ao(cd?[cb]:cb.querySelectorAll("img"),function(cg){if(o(ca.filter)){if(ca.filter.call(cf,cg)){b8.push(cg)}}else{if(cf.getImageURL(cg)){b8.push(cg)}}});this.isImg=cd;this.length=b8.length;this.images=b8;this.initBody();if(aT(document.createElement(M).style.transition)){ca.transition=false}if(ca.inline){var cc=0;var b9=function b9(){cc+=1;if(cc===cf.length){var cg;cf.initializing=false;cf.delaying={abort:function ch(){clearTimeout(cg)}};cg=setTimeout(function(){cf.delaying=false;cf.build()},0)}};this.initializing={abort:function ce(){ao(b8,function(cg){if(!cg.complete){j(cg,aL,b9)}})}};ao(b8,function(cg){if(cg.complete){b9()}else{bv(cg,aL,b9,{once:true})}})}else{bv(cb,x,this.onStart=function(cg){var ch=cg.target;if(ch.localName==="img"&&(!o(ca.filter)||ca.filter.call(cf,ch))){cf.view(cf.images.indexOf(ch))}})}}},{key:"build",value:function b5(){if(this.ready){return}var cd=this.element,co=this.options;var cm=cd.parentNode;var cn=document.createElement("div");cn.innerHTML=al;var cf=cn.querySelector(".".concat(M,"-container"));var ck=cf.querySelector(".".concat(M,"-title"));var cl=cf.querySelector(".".concat(M,"-toolbar"));var ca=cf.querySelector(".".concat(M,"-navbar"));var ce=cf.querySelector(".".concat(M,"-button"));var cb=cf.querySelector(".".concat(M,"-canvas"));this.parent=cm;this.viewer=cf;this.title=ck;this.toolbar=cl;this.navbar=ca;this.button=ce;this.canvas=cb;this.footer=cf.querySelector(".".concat(M,"-footer"));this.tooltipBox=cf.querySelector(".".concat(M,"-tooltip"));this.player=cf.querySelector(".".concat(M,"-player"));this.list=cf.querySelector(".".concat(M,"-list"));cf.id="".concat(M).concat(this.id);ck.id="".concat(M,"Title").concat(this.id);v(ck,!co.title?aj:X(Array.isArray(co.title)?co.title[0]:co.title));v(ca,!co.navbar?aj:X(co.navbar));a2(ce,aj,!co.button);if(co.keyboard){ce.setAttribute("tabindex",0)}if(co.backdrop){v(cf,"".concat(M,"-backdrop"));
if(!co.inline&&co.backdrop!=="static"){at(cb,bq,"hide")}}if(bp(co.className)&&co.className){co.className.split(G).forEach(function(cp){v(cf,cp)})}if(co.toolbar){var ci=document.createElement("ul");var b9=t(co.toolbar);var cc=s.slice(0,3);var cg=s.slice(7,9);var cj=s.slice(9);if(!b9){v(cl,X(co.toolbar))}ao(b9?co.toolbar:s,function(cw,cs){var cq=b9&&t(cw);var cr=b9?bD(cs):cw;var cp=cq&&!aT(cw.show)?cw.show:cw;if(!cp||!co.zoomable&&cc.indexOf(cr)!==-1||!co.rotatable&&cg.indexOf(cr)!==-1||!co.scalable&&cj.indexOf(cr)!==-1){return}var ct=cq&&!aT(cw.size)?cw.size:cw;var cv=cq&&!aT(cw.click)?cw.click:cw;var cu=document.createElement("li");if(co.keyboard){cu.setAttribute("tabindex",0)}cu.setAttribute("role","button");v(cu,"".concat(M,"-").concat(cr));if(!o(cv)){at(cu,bq,cr)}if(ac(cp)){v(cu,X(cp))}if(["small","large"].indexOf(ct)!==-1){v(cu,"".concat(M,"-").concat(ct))}else{if(cr==="play"){v(cu,"".concat(M,"-large"))}}if(o(cv)){bv(cu,x,cv)}ci.appendChild(cu)});cl.appendChild(ci)}else{v(cl,aj)}if(!co.rotatable){var ch=cl.querySelectorAll('li[class*="rotate"]');v(ch,ai);ao(ch,function(cp){cl.appendChild(cp)})}if(co.inline){v(ce,bF);S(cf,{zIndex:co.zIndexInline});if(window.getComputedStyle(cm).position==="static"){S(cm,{position:"relative"})}cm.insertBefore(cf,cd.nextSibling)}else{v(ce,bO);v(cf,bW);v(cf,d);v(cf,aj);S(cf,{zIndex:co.zIndex});var b8=co.container;if(bp(b8)){b8=cd.ownerDocument.querySelector(b8)}if(!b8){b8=this.body}b8.appendChild(cf)}if(co.inline){this.render();this.bind();this.isShown=true}this.ready=true;if(o(co.ready)){bv(cd,ak,co.ready,{once:true})}if(aV(cd,ak)===false){this.ready=false;return}if(this.ready&&co.inline){this.view(this.index)}}}],[{key:"noConflict",value:function b3(){window.Viewer=aZ;return b4}},{key:"setDefaults",value:function b7(b8){ad(T,t(b8)&&b8)}}]);return b4}();ad(Y.prototype,W,bT,a3,az,ay);return Y})));